<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Animation Control Test Cases</title>
    <style>
        /* Test 1: CSS animation without prefers-reduced-motion */
        .animated-box {
            animation: slide 3s ease-in-out infinite;
        }

        @keyframes slide {
            0% { transform: translateX(0); }
            50% { transform: translateX(100px); }
            100% { transform: translateX(0); }
        }

        /* ❌ ISSUE: animation-no-reduced-motion (warning) - No prefers-reduced-motion support */

        /* Test 2: Infinite animation (even worse) */
        .spinning {
            animation: spin 2s linear infinite;
        }

        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        /* ❌ ISSUE: infinite-animation-no-controls (warning) - Infinite animation without controls */

        /* Test 3: Transition with transform (should check for reduced motion) */
        .hover-effect {
            transition: transform 0.3s;
        }

        .hover-effect:hover {
            transform: scale(1.2) rotate(5deg);
        }

        /* ❌ ISSUE: animation-no-reduced-motion (warning) if no reduced motion support globally */

        /* Test 4: GOOD - Animation with prefers-reduced-motion support */
        .good-animation {
            animation: fadeIn 1s;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @media (prefers-reduced-motion: reduce) {
            .good-animation {
                animation: none;
            }
        }

        /* ✅ PASS: Has prefers-reduced-motion support */

        /* Parallax effect (will be detected in JS) */
        .parallax-section {
            height: 400px;
            background: linear-gradient(to bottom, #4a5568, #2d3748);
        }
    </style>
</head>
<body>
    <h1>Animation Control Test Cases (WCAG 2.2.2, 2.3.3, 1.4.2)</h1>

    <!-- Test 5: Auto-playing video without controls -->
    <!-- ❌ ISSUE: auto-play-video-no-controls (error) -->
    <section>
        <h2>Test 5: Auto-playing video without controls</h2>
        <video autoplay width="320" height="240">
            <source src="video.mp4" type="video/mp4">
        </video>
        <p>This video autoplays without controls - users cannot pause it.</p>
    </section>

    <!-- Test 6: Auto-playing audio without controls -->
    <!-- ❌ ISSUE: auto-play-audio-no-controls (error) -->
    <section>
        <h2>Test 6: Auto-playing audio without controls</h2>
        <audio autoplay>
            <source src="audio.mp3" type="audio/mpeg">
        </audio>
        <p>This audio autoplays without controls - very disruptive!</p>
    </section>

    <!-- Test 7: GOOD - Video with controls -->
    <!-- ✅ PASS: Has controls attribute -->
    <section>
        <h2>Test 7: Auto-playing video WITH controls (COMPLIANT)</h2>
        <video autoplay controls width="320" height="240">
            <source src="video.mp4" type="video/mp4">
        </video>
        <p>This video has controls, so users can pause it.</p>
    </section>

    <!-- Test 8: GOOD - Muted video (acceptable for short clips) -->
    <!-- ✅ PASS: Muted, so audio isn't disruptive -->
    <section>
        <h2>Test 8: Muted auto-playing video (COMPLIANT)</h2>
        <video autoplay muted controls width="320" height="240">
            <source src="video.mp4" type="video/mp4">
        </video>
        <p>Muted videos are okay, especially with controls.</p>
    </section>

    <!-- Test 9: Looping video without controls -->
    <!-- ❌ ISSUE: looping-video-no-controls (warning) -->
    <section>
        <h2>Test 9: Looping muted video without controls</h2>
        <video autoplay muted loop width="320" height="240">
            <source src="video.mp4" type="video/mp4">
        </video>
        <p>Even muted, looping video should have controls for users who find movement distracting.</p>
    </section>

    <!-- Animated content -->
    <section>
        <h2>Test 10: CSS Animations</h2>
        <div class="animated-box" style="width: 100px; height: 100px; background: #4299e1;"></div>
        <p>This box slides back and forth infinitely.</p>

        <div class="spinning" style="width: 50px; height: 50px; background: #f56565; margin-top: 20px;"></div>
        <p>This box spins infinitely.</p>
    </section>

    <section>
        <h2>Test 11: Hover transition effects</h2>
        <button class="hover-effect" style="padding: 10px 20px; background: #48bb78; color: white; border: none; cursor: pointer;">
            Hover me (transforms)
        </button>
        <p>Hover over this button to see transform animation.</p>
    </section>

    <section>
        <h2>Test 12: Good animation with reduced motion support</h2>
        <div class="good-animation" style="width: 200px; height: 100px; background: #9f7aea; color: white; padding: 20px;">
            This fades in and respects prefers-reduced-motion
        </div>
    </section>

    <!-- Test 13: JavaScript animations -->
    <section>
        <h2>Test 13-15: JavaScript Animations</h2>
        <div id="raf-box" style="width: 100px; height: 100px; background: #ed8936;"></div>
        <p>Animated with requestAnimationFrame (no reduced motion check)</p>

        <div id="interval-box" style="width: 100px; height: 100px; background: #38b2ac; margin-top: 20px;"></div>
        <p>Animated with setInterval (no pause button)</p>

        <button id="pause-btn">Pause setInterval Animation</button>
    </section>

    <section class="parallax-section">
        <h2 style="color: white; padding: 20px;">Test 16: Parallax Scrolling</h2>
        <div id="parallax-content" style="transform: translateY(0); color: white; padding: 20px;">
            This content has parallax effect (no reduced motion check)
        </div>
    </section>

    <script>
        // Test 13: requestAnimationFrame without prefers-reduced-motion
        // ❌ ISSUE: raf-no-reduced-motion (info)
        const rafBox = document.getElementById('raf-box');
        let rafPosition = 0;

        function animateRAF() {
            rafPosition = (rafPosition + 1) % 200;
            rafBox.style.transform = `translateX(${rafPosition}px)`;
            requestAnimationFrame(animateRAF);
        }

        animateRAF();

        // Test 14: setInterval animation without pause controls
        // ❌ ISSUE: setinterval-animation-no-controls (warning)
        const intervalBox = document.getElementById('interval-box');
        let intervalPosition = 0;

        const intervalId = setInterval(() => {
            intervalPosition = (intervalPosition + 2) % 200;
            intervalBox.style.transform = `translateY(${Math.sin(intervalPosition / 20) * 50}px)`;
        }, 30);

        // Test 15: GOOD - setInterval with pause button
        // ✅ PASS: Has clearInterval and pause control
        let isPaused = false;
        let pausedIntervalId = intervalId;

        document.getElementById('pause-btn').addEventListener('click', () => {
            if (isPaused) {
                // Resume - but this is still the same interval, so detection might not see this as "good"
                // A proper implementation would restart the interval
            } else {
                clearInterval(pausedIntervalId);
                isPaused = true;
            }
        });

        // Test 16: Parallax scrolling without reduced motion check
        // ❌ ISSUE: parallax-no-reduced-motion (info)
        window.addEventListener('scroll', () => {
            const scrollY = window.scrollY;
            const parallaxContent = document.getElementById('parallax-content');
            parallaxContent.style.transform = `translateY(${scrollY * 0.5}px)`;
        });

        // GOOD EXAMPLE: requestAnimationFrame with reduced motion check
        // ✅ PASS: Respects user preferences
        const goodBox = document.createElement('div');
        goodBox.style.cssText = 'width: 100px; height: 100px; background: #68d391; margin-top: 20px;';
        document.body.appendChild(goodBox);

        const prefersReducedMotion = window.matchMedia('(prefers-reduced-motion: reduce)').matches;

        if (!prefersReducedMotion) {
            let goodPosition = 0;
            function animateGood() {
                goodPosition = (goodPosition + 1) % 200;
                goodBox.style.transform = `translateX(${goodPosition}px)`;
                requestAnimationFrame(animateGood);
            }
            animateGood();
        }
    </script>

    <footer style="margin-top: 400px; padding: 40px; background: #f7fafc;">
        <h3>Expected Issues Summary:</h3>
        <ul>
            <li><strong>auto-play-video-no-controls (error):</strong> Video autoplay without controls (Test 5)</li>
            <li><strong>auto-play-audio-no-controls (error):</strong> Audio autoplay without controls (Test 6)</li>
            <li><strong>looping-video-no-controls (warning):</strong> Looping muted video without controls (Test 9)</li>
            <li><strong>animation-no-reduced-motion (warning):</strong> CSS animations without prefers-reduced-motion (Tests 1, 3)</li>
            <li><strong>infinite-animation-no-controls (warning):</strong> Infinite CSS animation (Test 2)</li>
            <li><strong>raf-no-reduced-motion (info):</strong> requestAnimationFrame without motion check (Test 13)</li>
            <li><strong>setinterval-animation-no-controls (warning):</strong> setInterval animation without pause (Test 14)</li>
            <li><strong>parallax-no-reduced-motion (info):</strong> Parallax scroll without motion check (Test 16)</li>
        </ul>
        <p><strong>Total expected:</strong> 2 errors + 4 warnings + 3 info = 9 issues</p>
        <p><strong>COMPLIANT examples:</strong> Tests 7, 8, 12, and the final good requestAnimationFrame example</p>
    </footer>
</body>
</html>
