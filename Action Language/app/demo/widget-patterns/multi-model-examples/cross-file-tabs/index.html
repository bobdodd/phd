<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Multi-Model Example: Cross-File Tabs - Paradise Widget Patterns</title>
  <link rel="stylesheet" href="../../css/demo.css">
  <style>
    .example-explanation {
      background: #f0f8ff;
      border-left: 4px solid #0066cc;
      padding: 20px;
      margin: 20px 0;
    }

    .file-structure {
      background: #f8f8f8;
      border: 1px solid #ddd;
      border-radius: 4px;
      padding: 16px;
      margin: 16px 0;
      font-family: monospace;
      font-size: 14px;
    }

    .file-structure .file {
      padding: 4px 0;
      padding-left: 20px;
    }

    .file-structure .file::before {
      content: "üìÑ ";
      margin-right: 8px;
    }

    .analysis-comparison {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
      margin: 20px 0;
    }

    .analysis-box {
      border: 2px solid #ddd;
      border-radius: 8px;
      padding: 16px;
    }

    .analysis-box.traditional {
      border-color: #ff6b6b;
      background: #fff5f5;
    }

    .analysis-box.paradise {
      border-color: #4caf50;
      background: #f1f8f4;
    }

    .analysis-box h3 {
      margin-top: 0;
    }

    .false-positive {
      color: #d32f2f;
      font-weight: bold;
    }

    .true-result {
      color: #388e3c;
      font-weight: bold;
    }

    /* Tabs styling */
    [role="tablist"] {
      display: flex;
      gap: 4px;
      border-bottom: 2px solid #ddd;
      margin-bottom: 20px;
    }

    [role="tab"] {
      padding: 12px 24px;
      background: #f5f5f5;
      border: 1px solid #ddd;
      border-bottom: none;
      cursor: pointer;
      font-size: 16px;
      transition: background 0.2s;
    }

    [role="tab"]:hover {
      background: #e8e8e8;
    }

    [role="tab"]:focus {
      outline: 2px solid #0066cc;
      outline-offset: -2px;
    }

    [role="tab"][aria-selected="true"] {
      background: white;
      border-bottom: 2px solid white;
      margin-bottom: -2px;
      font-weight: 600;
    }

    [role="tabpanel"] {
      padding: 20px;
      border: 1px solid #ddd;
      border-radius: 4px;
      background: white;
    }

    [role="tabpanel"][hidden] {
      display: none;
    }
  </style>
</head>
<body>
  <div class="container">
    <nav class="breadcrumb">
      <a href="../../index.html">Home</a> &gt;
      <a href="#multi-model">Multi-Model Examples</a> &gt;
      <span>Cross-File Tabs</span>
    </nav>

    <header>
      <h1>üéØ Multi-Model Example: Cross-File Tabs</h1>
      <p class="subtitle">Demonstrating Paradise's cross-file pattern detection</p>

      <div class="pattern-info">
        <span class="complexity-badge high">Multi-File Architecture</span>
        <span class="wcag-badge">Zero False Positives</span>
      </div>
    </header>

    <section class="example-explanation">
      <h2>üîç The Problem</h2>
      <p>In real-world projects, developers often split code across multiple files for organization:</p>
      <ul>
        <li><strong>index.html</strong> - Contains the tabs structure</li>
        <li><strong>tabs-structure.js</strong> - Sets up basic tab switching (click handlers)</li>
        <li><strong>tabs-keyboard.js</strong> - Adds keyboard navigation (arrow keys, Home/End)</li>
      </ul>

      <p><strong>Traditional tools analyze each file independently and report false positives:</strong></p>
      <ul>
        <li>‚ùå "tabs-structure.js has click handler but no keyboard handler" (FALSE POSITIVE)</li>
        <li>The keyboard handler EXISTS but is in a different file!</li>
      </ul>

      <p><strong>Paradise's multi-model architecture eliminates false positives:</strong></p>
      <ul>
        <li>‚úÖ Analyzes HTML + ALL JavaScript files together</li>
        <li>‚úÖ Detects complete pattern across multiple files</li>
        <li>‚úÖ Zero false positives when pattern is split</li>
      </ul>
    </section>

    <section class="file-structure-section">
      <h2>üìÅ File Structure</h2>
      <div class="file-structure">
        <div>cross-file-tabs/</div>
        <div class="file">index.html (tabs structure with ARIA)</div>
        <div class="file">tabs-structure.js (click handlers + basic setup)</div>
        <div class="file">tabs-keyboard.js (arrow navigation + Home/End)</div>
      </div>

      <p><strong>Key Insight:</strong> Each file is incomplete on its own, but together they form a complete, accessible tabs pattern.</p>
    </section>

    <section class="demo-section">
      <h2>üé® Working Demo</h2>
      <p>This tabs implementation is split across 3 files. Try it with keyboard navigation:</p>

      <div role="tablist" aria-label="Multi-file tabs example" id="demo-tabs">
        <button role="tab" aria-selected="true" aria-controls="panel-1" id="tab-1" tabindex="0">
          Documentation
        </button>
        <button role="tab" aria-selected="false" aria-controls="panel-2" id="tab-2" tabindex="-1">
          Examples
        </button>
        <button role="tab" aria-selected="false" aria-controls="panel-3" id="tab-3" tabindex="-1">
          API Reference
        </button>
      </div>

      <div role="tabpanel" id="panel-1" aria-labelledby="tab-1">
        <h3>Documentation</h3>
        <p>Complete guides for using Paradise to analyze accessibility issues in your code.</p>
        <p>This content is managed by <code>tabs-structure.js</code> which handles panel visibility.</p>
      </div>

      <div role="tabpanel" id="panel-2" aria-labelledby="tab-2" hidden>
        <h3>Examples</h3>
        <p>Real-world code examples demonstrating common accessibility patterns.</p>
        <p>Try using <strong>arrow keys</strong> to navigate tabs - handled by <code>tabs-keyboard.js</code>.</p>
      </div>

      <div role="tabpanel" id="panel-3" aria-labelledby="tab-3" hidden>
        <h3>API Reference</h3>
        <p>Complete API documentation for integrating Paradise into your workflow.</p>
        <p>Press <strong>Home</strong> to jump to first tab or <strong>End</strong> for last tab.</p>
      </div>

      <div style="margin-top: 20px; padding: 16px; background: #f0f8ff; border-radius: 4px;">
        <strong>‚úÖ Try these keyboard shortcuts:</strong>
        <ul style="margin: 8px 0;">
          <li><kbd>‚Üê</kbd> <kbd>‚Üí</kbd> - Navigate between tabs</li>
          <li><kbd>Home</kbd> - Jump to first tab</li>
          <li><kbd>End</kbd> - Jump to last tab</li>
          <li><kbd>Enter</kbd> or <kbd>Space</kbd> - Activate focused tab</li>
        </ul>
      </div>
    </section>

    <section class="analysis-section">
      <h2>üî¨ Analysis Comparison</h2>

      <div class="analysis-comparison">
        <div class="analysis-box traditional">
          <h3>‚ùå Traditional Tool (File-Scope)</h3>
          <p><strong>Analyzing: tabs-structure.js</strong></p>
          <pre><code>‚úì Tab structure detected
‚úì Click handlers present
‚úì aria-selected updates
‚úó <span class="false-positive">NO KEYBOARD HANDLER</span>

<span class="false-positive">Issue: Click handler without keyboard support
WCAG 2.1.1 violation</span></code></pre>

          <p><strong>Result:</strong> <span class="false-positive">FALSE POSITIVE</span></p>
          <p>The keyboard handler exists in tabs-keyboard.js but file-scope analysis can't see it.</p>
        </div>

        <div class="analysis-box paradise">
          <h3>‚úÖ Paradise (Multi-Model)</h3>
          <p><strong>Analyzing: index.html + tabs-structure.js + tabs-keyboard.js</strong></p>
          <pre><code>‚úì Tab structure detected (index.html)
‚úì Click handlers present (tabs-structure.js)
‚úì aria-selected updates (tabs-structure.js)
‚úì <span class="true-result">KEYBOARD NAVIGATION DETECTED</span>
  ‚Ä¢ Arrow keys (tabs-keyboard.js)
  ‚Ä¢ Home/End keys (tabs-keyboard.js)
‚úì Roving tabindex (tabs-structure.js)

<span class="true-result">Complete tabs pattern detected
Zero issues found</span></code></pre>

          <p><strong>Result:</strong> <span class="true-result">ACCURATE DETECTION</span></p>
          <p>Multi-model analysis sees the complete pattern across all files.</p>
        </div>
      </div>
    </section>

    <section class="code-walkthrough">
      <h2>üíª Code Walkthrough</h2>

      <h3>File 1: index.html (Structure)</h3>
      <details class="code-sample">
        <summary>View HTML Source</summary>
        <pre><code>&lt;!-- Complete ARIA structure --&gt;
&lt;div role="tablist" aria-label="Example tabs"&gt;
  &lt;button role="tab"
          aria-selected="true"
          aria-controls="panel-1"
          id="tab-1"
          tabindex="0"&gt;
    Tab 1
  &lt;/button&gt;
  &lt;button role="tab"
          aria-selected="false"
          aria-controls="panel-2"
          id="tab-2"
          tabindex="-1"&gt;
    Tab 2
  &lt;/button&gt;
&lt;/div&gt;

&lt;div role="tabpanel" id="panel-1" aria-labelledby="tab-1"&gt;
  Content 1
&lt;/div&gt;
&lt;div role="tabpanel" id="panel-2" aria-labelledby="tab-2" hidden&gt;
  Content 2
&lt;/div&gt;

&lt;!-- Load both JavaScript files --&gt;
&lt;script src="tabs-structure.js"&gt;&lt;/script&gt;
&lt;script src="tabs-keyboard.js"&gt;&lt;/script&gt;</code></pre>
      </details>

      <h3>File 2: tabs-structure.js (Click Handlers)</h3>
      <details class="code-sample">
        <summary>View JavaScript Source</summary>
        <pre><code>// Basic tab switching with click handlers
const tabs = document.querySelectorAll('[role="tab"]');
const panels = document.querySelectorAll('[role="tabpanel"]');

function activateTab(tab) {
  const panelId = tab.getAttribute('aria-controls');
  const panel = document.getElementById(panelId);

  // Update all tabs
  tabs.forEach(t => {
    t.setAttribute('aria-selected', 'false');
    t.setAttribute('tabindex', '-1');
  });

  // Update clicked tab
  tab.setAttribute('aria-selected', 'true');
  tab.setAttribute('tabindex', '0');

  // Update all panels
  panels.forEach(p => p.setAttribute('hidden', ''));
  panel.removeAttribute('hidden');
}

// Click handlers
tabs.forEach(tab => {
  tab.addEventListener('click', () => activateTab(tab));
});

// ‚ö†Ô∏è File-scope analysis would flag this as incomplete
// (missing keyboard handler) but it's actually fine!</code></pre>
      </details>

      <h3>File 3: tabs-keyboard.js (Keyboard Navigation)</h3>
      <details class="code-sample">
        <summary>View JavaScript Source</summary>
        <pre><code>// Arrow key navigation (separate file for organization)
const tablist = document.querySelector('[role="tablist"]');
const tabs = Array.from(document.querySelectorAll('[role="tab"]'));

tablist.addEventListener('keydown', (event) => {
  const currentTab = document.activeElement;
  if (!tabs.includes(currentTab)) return;

  const currentIndex = tabs.indexOf(currentTab);
  let targetIndex;

  switch (event.key) {
    case 'ArrowLeft':
      targetIndex = currentIndex === 0
        ? tabs.length - 1
        : currentIndex - 1;
      event.preventDefault();
      tabs[targetIndex].click();
      tabs[targetIndex].focus();
      break;

    case 'ArrowRight':
      targetIndex = (currentIndex + 1) % tabs.length;
      event.preventDefault();
      tabs[targetIndex].click();
      tabs[targetIndex].focus();
      break;

    case 'Home':
      event.preventDefault();
      tabs[0].click();
      tabs[0].focus();
      break;

    case 'End':
      event.preventDefault();
      tabs[tabs.length - 1].click();
      tabs[tabs.length - 1].focus();
      break;
  }
});

// ‚úÖ Paradise detects this keyboard handler even though
// it's in a different file from the click handlers!</code></pre>
      </details>
    </section>

    <section class="why-this-matters">
      <h2>üí° Why This Matters</h2>

      <div class="insight-box">
        <h3>Real-World Development Patterns</h3>
        <p>Modern codebases split functionality across files for:</p>
        <ul>
          <li><strong>Organization:</strong> Core logic vs. enhancements</li>
          <li><strong>Team collaboration:</strong> Multiple developers working on same component</li>
          <li><strong>Progressive enhancement:</strong> Basic functionality + keyboard layer</li>
          <li><strong>Code reuse:</strong> Shared keyboard handler across multiple components</li>
        </ul>

        <h3>The False Positive Problem</h3>
        <p>File-scope analysis creates <strong>noise</strong> that developers learn to ignore:</p>
        <ul>
          <li>‚ùå Developers see "click without keyboard" warnings constantly</li>
          <li>‚ùå They know it's a false positive (keyboard handler is in another file)</li>
          <li>‚ùå They learn to ignore these warnings</li>
          <li>‚ùå When a REAL issue appears, they miss it (crying wolf problem)</li>
        </ul>

        <h3>Paradise's Solution</h3>
        <p>Multi-model analysis eliminates false positives:</p>
        <ul>
          <li>‚úÖ Developers see ZERO warnings for correctly split code</li>
          <li>‚úÖ They trust the analyzer</li>
          <li>‚úÖ When a warning appears, they investigate (no noise)</li>
          <li>‚úÖ Real issues get fixed, not ignored</li>
        </ul>
      </div>
    </section>

    <section class="technical-details">
      <h2>‚öôÔ∏è How Paradise Achieves This</h2>

      <ol class="detection-steps">
        <li>
          <strong>Multi-File Discovery</strong>
          <p>Paradise analyzes index.html and discovers both <code>&lt;script&gt;</code> tags</p>
        </li>
        <li>
          <strong>Parse All Files</strong>
          <p>Parses HTML to DOMModel, both JS files to ActionLanguageModel</p>
        </li>
        <li>
          <strong>Build DocumentModel</strong>
          <p>Creates unified DocumentModel containing all three files</p>
        </li>
        <li>
          <strong>Cross-File Linking</strong>
          <p>Links handlers from BOTH JS files to HTML elements by ID/selector</p>
        </li>
        <li>
          <strong>Complete Pattern Validation</strong>
          <p>Validates tabs pattern sees BOTH click AND keyboard handlers</p>
        </li>
        <li>
          <strong>Zero False Positives</strong>
          <p>Reports complete pattern, no warnings</p>
        </li>
      </ol>
    </section>

    <section class="wcag-mapping">
      <h2>üìã WCAG Success Criteria</h2>
      <p>This implementation satisfies:</p>
      <ul class="wcag-list">
        <li>
          <strong>2.1.1 Keyboard (Level A)</strong>
          <p>All functionality available via keyboard (detected across multiple files)</p>
        </li>
        <li>
          <strong>1.3.1 Info and Relationships (Level A)</strong>
          <p>ARIA structure properly implemented</p>
        </li>
        <li>
          <strong>4.1.2 Name, Role, Value (Level A)</strong>
          <p>State updates (aria-selected) detected in tabs-structure.js</p>
        </li>
      </ul>
    </section>

    <section class="resources">
      <h2>üìö Related Examples</h2>
      <ul>
        <li><a href="../component-dialog/index.html">Component-Based Dialog</a> - React hooks split across files</li>
        <li><a href="../distributed-menu/index.html">Distributed Menu</a> - Menu pattern split across 4 files</li>
        <li><a href="../../index.html">All Widget Patterns</a></li>
      </ul>
    </section>

    <nav class="demo-nav">
      <a href="../../index.html" class="nav-prev">‚Üê Back to Home</a>
      <a href="../component-dialog/index.html" class="nav-next">Next: Component-Based Dialog ‚Üí</a>
    </nav>
  </div>

  <script src="tabs-structure.js"></script>
  <script src="tabs-keyboard.js"></script>
</body>
</html>
