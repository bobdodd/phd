<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 700 550" width="700" height="550">
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="black"/>
    </marker>
    <marker id="arrowhead-start" markerWidth="10" markerHeight="7" refX="1" refY="3.5" orient="auto">
      <polygon points="10 0, 0 3.5, 10 7" fill="black"/>
    </marker>
    <marker id="diamond" markerWidth="12" markerHeight="12" refX="6" refY="6" orient="auto">
      <polygon points="6 0, 12 6, 6 12, 0 6" fill="white" stroke="black" stroke-width="1"/>
    </marker>
  </defs>

  <style>
    .box { fill: white; stroke: black; stroke-width: 1.5; }
    .label { font-family: Arial, sans-serif; font-size: 11px; text-anchor: middle; dominant-baseline: middle; }
    .line { stroke: black; stroke-width: 1.5; fill: none; }
    .num { font-family: Arial, sans-serif; font-size: 11px; }
  </style>

  <!-- White background for dark mode compatibility -->
  <rect x="0" y="0" width="700" height="550" fill="white"/>

  <!-- Storage Layer Presentation Specification -->
  <rect x="30" y="20" width="100" height="50" class="box"/>
  <text x="80" y="35" class="label">Storage Layer</text>
  <text x="80" y="48" class="label">Presentation</text>
  <text x="80" y="61" class="label">Specification</text>

  <!-- Runtime Layer Presentation Specification -->
  <rect x="200" y="20" width="100" height="50" class="box"/>
  <text x="250" y="35" class="label">Runtime Layer</text>
  <text x="250" y="48" class="label">Presentation</text>
  <text x="250" y="61" class="label">Specification</text>

  <!-- Session -->
  <rect x="570" y="30" width="80" height="30" class="box"/>
  <text x="610" y="45" class="label">Session</text>

  <!-- Runtime Instance -->
  <rect x="555" y="95" width="80" height="30" class="box"/>
  <text x="595" y="110" class="label">Runtime Instance</text>

  <!-- Link Marker -->
  <rect x="555" y="155" width="80" height="30" class="box"/>
  <text x="595" y="170" class="label">Link Marker</text>

  <!-- Attribute -->
  <rect x="30" y="155" width="80" height="30" class="box"/>
  <text x="70" y="170" class="label">Attribute</text>

  <!-- Presentation Specification -->
  <rect x="140" y="155" width="100" height="30" class="box"/>
  <text x="190" y="170" class="label">Presentation</text>
  <text x="190" y="170" class="label" dy="-8">Presentation</text>
  <text x="190" y="170" class="label" dy="5">Specification</text>

  <!-- Component (larger box) -->
  <rect x="250" y="230" width="100" height="35" class="box"/>
  <text x="300" y="248" class="label">Component</text>

  <!-- Anchor -->
  <rect x="530" y="230" width="80" height="35" class="box"/>
  <text x="570" y="248" class="label">Anchor</text>

  <!-- Composite Component -->
  <rect x="30" y="380" width="90" height="40" class="box"/>
  <text x="75" y="393" class="label">Composite</text>
  <text x="75" y="407" class="label">Component</text>

  <!-- Atom Component -->
  <rect x="150" y="380" width="90" height="40" class="box"/>
  <text x="195" y="393" class="label">Atom</text>
  <text x="195" y="407" class="label">Component</text>

  <!-- Link Component -->
  <rect x="270" y="380" width="90" height="40" class="box"/>
  <text x="315" y="393" class="label">Link</text>
  <text x="315" y="407" class="label">Component</text>

  <!-- Resolved Anchored End -->
  <rect x="500" y="310" width="90" height="40" class="box"/>
  <text x="545" y="323" class="label">Resolved</text>
  <text x="545" y="337" class="label">Anchored End</text>

  <!-- Link Resolver -->
  <rect x="500" y="420" width="90" height="30" class="box"/>
  <text x="545" y="435" class="label">Link Resolver</text>

  <!-- Arc -->
  <rect x="360" y="480" width="70" height="30" class="box"/>
  <text x="395" y="495" class="label">Arc</text>

  <!-- Arc End -->
  <rect x="570" y="480" width="70" height="30" class="box"/>
  <text x="605" y="495" class="label">Arc End</text>

  <!-- CONNECTIONS -->

  <!-- Storage Layer to Runtime Layer (bidirectional) -->
  <line x1="130" y1="45" x2="200" y2="45" class="line" marker-end="url(#arrowhead)" marker-start="url(#arrowhead-start)"/>

  <!-- Runtime Layer to Session -->
  <line x1="300" y1="45" x2="570" y2="45" class="line" marker-end="url(#arrowhead)"/>

  <!-- Session to Runtime Instance -->
  <line x1="595" y1="60" x2="595" y2="95" class="line" marker-end="url(#arrowhead)"/>

  <!-- Runtime Instance to Link Marker -->
  <line x1="595" y1="125" x2="595" y2="155" class="line" marker-end="url(#arrowhead)"/>

  <!-- Storage Layer down to Presentation Specification area -->
  <polyline points="80,70 80,130 190,130 190,155" class="line" marker-end="url(#arrowhead)"/>

  <!-- Attribute to Component (with diamond) -->
  <polyline points="70,185 70,248 250,248" class="line" marker-end="url(#diamond)"/>

  <!-- Presentation Specification to Component (with diamond) -->
  <polyline points="190,185 190,225 250,247" class="line" marker-end="url(#diamond)"/>

  <!-- Link Marker to Anchor -->
  <line x1="595" y1="185" x2="595" y2="215" class="line"/>
  <line x1="595" y1="215" x2="570" y2="230" class="line" marker-end="url(#arrowhead)"/>

  <!-- Component to Anchor (bidirectional) -->
  <line x1="350" y1="248" x2="530" y2="248" class="line" marker-end="url(#arrowhead)" marker-start="url(#arrowhead-start)"/>

  <!-- Anchor to Resolved Anchored End -->
  <line x1="570" y1="265" x2="545" y2="310" class="line" marker-end="url(#arrowhead)"/>

  <!-- Component to Composite Component -->
  <polyline points="275,265 75,340 75,380" class="line" marker-end="url(#arrowhead)"/>

  <!-- Component to Atom Component -->
  <polyline points="290,265 195,340 195,380" class="line" marker-end="url(#arrowhead)"/>

  <!-- Component to Link Component -->
  <polyline points="310,265 315,340 315,380" class="line" marker-end="url(#arrowhead)"/>

  <!-- Composite Component self-reference (loop back) -->
  <path d="M 30,400 Q 10,400 10,360 Q 10,320 50,320 L 50,320" class="line"/>
  <line x1="50" y1="320" x2="75" y2="380" class="line" marker-end="url(#arrowhead)"/>

  <!-- Component to self (for Composite) - arrow from Component up and around -->
  <path d="M 265,230 L 265,200 L 340,200 L 340,230" class="line" marker-start="url(#arrowhead-start)" marker-end="url(#arrowhead)"/>

  <!-- Resolved Anchored End to Link Resolver -->
  <line x1="545" y1="350" x2="545" y2="420" class="line" marker-end="url(#arrowhead)"/>

  <!-- Link Component to Arc -->
  <polyline points="315,420 315,450 395,450 395,480" class="line" marker-end="url(#arrowhead)"/>

  <!-- Arc to Arc End -->
  <line x1="430" y1="495" x2="570" y2="495" class="line" marker-end="url(#arrowhead)"/>
  <text x="500" y="488" class="num">2</text>

  <!-- Link Resolver to Arc End -->
  <line x1="545" y1="450" x2="590" y2="480" class="line" marker-end="url(#arrowhead)"/>

  <!-- Arc End to Resolved Anchored End (going up) -->
  <polyline points="620,480 620,330 590,330" class="line" marker-end="url(#arrowhead)"/>

</svg>