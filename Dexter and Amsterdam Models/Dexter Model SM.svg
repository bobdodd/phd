<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 720 580" width="720" height="580">
  <defs>
    <!-- Single arrowhead (1 side) -->
    <marker id="arrow-one" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="black"/>
    </marker>
    <marker id="arrow-one-start" markerWidth="10" markerHeight="7" refX="1" refY="3.5" orient="auto">
      <polygon points="10 0, 0 3.5, 10 7" fill="black"/>
    </marker>
    <!-- Double arrowhead (M side) -->
    <marker id="arrow-many" markerWidth="16" markerHeight="10" refX="15" refY="5" orient="auto">
      <polygon points="0 0, 8 5, 0 10" fill="black"/>
      <polygon points="6 0, 14 5, 6 10" fill="black"/>
    </marker>
    <marker id="arrow-many-start" markerWidth="16" markerHeight="10" refX="1" refY="5" orient="auto">
      <polygon points="16 0, 8 5, 16 10" fill="black"/>
      <polygon points="10 0, 2 5, 10 10" fill="black"/>
    </marker>
    <!-- Diamond for "has a" relationship -->
    <marker id="diamond" markerWidth="12" markerHeight="12" refX="6" refY="6" orient="auto">
      <polygon points="6 0, 12 6, 6 12, 0 6" fill="white" stroke="black" stroke-width="1"/>
    </marker>
  </defs>

  <style>
    .box { fill: white; stroke: black; stroke-width: 1.5; }
    .label { font-family: Arial, sans-serif; font-size: 11px; text-anchor: middle; dominant-baseline: middle; }
    .line { stroke: black; stroke-width: 1.5; fill: none; }
    .num { font-family: Arial, sans-serif; font-size: 11px; }
    .inherit-mark { stroke: black; stroke-width: 1.5; }
  </style>

  <!-- White background -->
  <rect x="0" y="0" width="720" height="580" fill="white"/>

  <!-- ==================== BOXES ==================== -->

  <!-- Storage Layer Presentation Specification -->
  <rect x="30" y="20" width="100" height="50" class="box"/>
  <text x="80" y="35" class="label">Storage Layer</text>
  <text x="80" y="48" class="label">Presentation</text>
  <text x="80" y="61" class="label">Specification</text>

  <!-- Runtime Layer Presentation Specification -->
  <rect x="200" y="20" width="100" height="50" class="box"/>
  <text x="250" y="35" class="label">Runtime Layer</text>
  <text x="250" y="48" class="label">Presentation</text>
  <text x="250" y="61" class="label">Specification</text>

  <!-- Session -->
  <rect x="560" y="30" width="80" height="30" class="box"/>
  <text x="600" y="45" class="label">Session</text>

  <!-- Runtime Instance -->
  <rect x="555" y="95" width="90" height="30" class="box"/>
  <text x="600" y="110" class="label">Runtime Instance</text>

  <!-- Link Marker -->
  <rect x="555" y="155" width="80" height="30" class="box"/>
  <text x="595" y="170" class="label">Link Marker</text>

  <!-- Attribute -->
  <rect x="30" y="155" width="80" height="30" class="box"/>
  <text x="70" y="170" class="label">Attribute</text>

  <!-- Presentation Specification -->
  <rect x="140" y="155" width="100" height="30" class="box"/>
  <text x="190" y="163" class="label">Presentation</text>
  <text x="190" y="177" class="label">Specification</text>

  <!-- Component (taller to accommodate multiple connectors) -->
  <rect x="250" y="220" width="100" height="55" class="box"/>
  <text x="300" y="248" class="label">Component</text>

  <!-- Anchor -->
  <rect x="530" y="230" width="80" height="40" class="box"/>
  <text x="570" y="250" class="label">Anchor</text>

  <!-- Composite Component -->
  <rect x="30" y="390" width="90" height="40" class="box"/>
  <text x="75" y="403" class="label">Composite</text>
  <text x="75" y="417" class="label">Component</text>

  <!-- Atom Component -->
  <rect x="150" y="390" width="90" height="40" class="box"/>
  <text x="195" y="403" class="label">Atom</text>
  <text x="195" y="417" class="label">Component</text>

  <!-- Link Component -->
  <rect x="270" y="390" width="90" height="40" class="box"/>
  <text x="315" y="403" class="label">Link</text>
  <text x="315" y="417" class="label">Component</text>

  <!-- Resolved Anchored End -->
  <rect x="490" y="310" width="100" height="40" class="box"/>
  <text x="540" y="323" class="label">Resolved</text>
  <text x="540" y="337" class="label">Anchored End</text>

  <!-- Link Resolver -->
  <rect x="495" y="420" width="90" height="30" class="box"/>
  <text x="540" y="435" class="label">Link Resolver</text>

  <!-- Arc -->
  <rect x="355" y="500" width="70" height="30" class="box"/>
  <text x="390" y="515" class="label">Arc</text>

  <!-- Arc End -->
  <rect x="560" y="500" width="70" height="30" class="box"/>
  <text x="595" y="515" class="label">Arc End</text>

  <!-- ==================== RELATIONSHIPS ==================== -->

  <!-- Storage Layer ↔ Runtime Layer (1:1 bidirectional) -->
  <line x1="130" y1="45" x2="200" y2="45" class="line" marker-end="url(#arrow-one)" marker-start="url(#arrow-one-start)"/>

  <!-- Runtime Layer → Session (1:M) -->
  <line x1="300" y1="45" x2="560" y2="45" class="line" marker-end="url(#arrow-many)"/>

  <!-- Session → Runtime Instance (1:M) -->
  <line x1="600" y1="60" x2="600" y2="95" class="line" marker-end="url(#arrow-many)"/>

  <!-- Runtime Instance → Link Marker (1:M) -->
  <line x1="600" y1="125" x2="595" y2="155" class="line" marker-end="url(#arrow-many)"/>

  <!-- Storage Layer Pres Spec down to Presentation Specification (1:1) -->
  <polyline points="80,70 80,130 190,130 190,155" class="line" marker-end="url(#arrow-one)"/>

  <!-- Attribute → Component ("has a" - Component has Attributes) -->
  <polyline points="70,185 70,235 250,235" class="line" marker-end="url(#diamond)"/>

  <!-- Presentation Specification → Component ("has a" - Component has Presentation Specification) -->
  <polyline points="190,185 190,210 225,235 250,235" class="line" marker-end="url(#diamond)"/>

  <!-- Link Marker → Anchor (M:1) -->
  <polyline points="595,185 595,215 570,230" class="line" marker-end="url(#arrow-one)"/>

  <!-- Component ↔ Anchor (M:M bidirectional) -->
  <line x1="350" y1="250" x2="530" y2="250" class="line" marker-end="url(#arrow-many)" marker-start="url(#arrow-many-start)"/>

  <!-- Anchor → Resolved Anchored End (1:M) -->
  <line x1="570" y1="270" x2="540" y2="310" class="line" marker-end="url(#arrow-many)"/>

  <!-- ==================== INHERITANCE (is-a) ==================== -->
  <!-- Component to subtypes - no arrowheads, perpendicular mark at parent -->

  <!-- Main inheritance line from Component down -->
  <line x1="300" y1="275" x2="300" y2="320" class="line"/>
  <!-- Perpendicular mark at parent (Component) -->
  <line x1="290" y1="285" x2="310" y2="285" class="inherit-mark"/>

  <!-- Horizontal line connecting subtypes -->
  <line x1="75" y1="320" x2="315" y2="320" class="line"/>

  <!-- Vertical lines down to each subtype -->
  <line x1="75" y1="320" x2="75" y2="390" class="line"/>
  <line x1="195" y1="320" x2="195" y2="390" class="line"/>
  <line x1="315" y1="320" x2="315" y2="390" class="line"/>

  <!-- ==================== COMPOSITE CONTAINMENT ==================== -->

  <!-- Composite Component contains Components (loop back to Component) -->
  <!-- This shows M:1 - many components can be in one composite -->
  <path d="M 30,410 Q 10,410 10,350 Q 10,265 250,265" class="line" marker-end="url(#arrow-one)"/>

  <!-- Component self-association for Composite containment (at top) -->
  <!-- Shows that Component can contain Components via Composite -->
  <path d="M 265,220 L 265,195 L 335,195 L 335,220" class="line" marker-start="url(#arrow-many-start)" marker-end="url(#arrow-one)"/>

  <!-- ==================== LINK RESOLUTION CHAIN ==================== -->

  <!-- Resolved Anchored End → Link Resolver (1:M) -->
  <line x1="540" y1="350" x2="540" y2="420" class="line" marker-end="url(#arrow-many)"/>

  <!-- Link Component → Arc (1:M) -->
  <polyline points="315,430 315,465 390,465 390,500" class="line" marker-end="url(#arrow-many)"/>

  <!-- Arc → Arc End (1:2 - each arc has exactly 2 ends) -->
  <line x1="425" y1="515" x2="560" y2="515" class="line" marker-end="url(#arrow-many)"/>
  <text x="495" y="505" class="num">2</text>

  <!-- Link Resolver → Arc End (M:1) -->
  <line x1="550" y1="450" x2="580" y2="500" class="line" marker-end="url(#arrow-one)"/>

  <!-- Arc End → Resolved Anchored End (M:1 going up) -->
  <polyline points="615,500 615,330 590,330" class="line" marker-end="url(#arrow-one)"/>

</svg>